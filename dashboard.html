<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Container Damage Reports</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container mt-5">
        <div class="text-center mb-4">
            <h1><img src="images/koja.jpg" alt="TPK KOJA" class="img-fluid" /></h1>
            <h2>Admin Dashboard - Damage Reports</h2>
        </div>
        <div class="table-responsive">
            <table class="table table-striped table-bordered">
                <thead class="table-dark">
                    <tr>
                        <th>EIR No</th>
                        <th>Date of Damage</th>
                        <th>Vessel</th>
                        <th>Voyage No</th>
                        <th>Container Serial No</th>
                        <th>Liable Party</th>
                        <th>Container Status</th>
                        <th>Reporting Person</th>
                        <th>Status</th>
                        <!-- Add more headers if needed -->
                    </tr>
                </thead>
                <tbody id="reports-table-body">
                    <!-- Data will be inserted here by JavaScript -->
                </tbody>
            </table>
        </div>
        <div class="text-center my-4">
            <button id="logout-btn" class="btn btn-danger">Logout</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/signature_pad/4.1.7/signature_pad.umd.min.js"></script>
    <script type="module" src="dashboard.js"></script>

    <!-- Modal for Draft Details -->
    <div class="modal fade" id="draftModal" tabindex="-1" aria-labelledby="draftModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="draftModalLabel">Draft Report Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="modal-form">
                        <!-- Section 1: EIR, Vessel, etc. -->
                        <div class="row mb-3">
                          <div class="col-md-6">
                            <label for="modal-eirNo" class="form-label">EIR No:</label>
                            <input type="text" class="form-control" id="modal-eirNo" name="eirNo" disabled />
                          </div>
                          <div class="col-md-6">
                            <label for="modal-damageDate" class="form-label">Date of Damage:</label>
                            <input type="date" class="form-control" id="modal-damageDate" name="damageDate" disabled />
                          </div>
                        </div>
                        <div class="row mb-3">
                          <div class="col-md-6">
                            <label for="modal-vessel" class="form-label">Vessel:</label>
                            <input type="text" class="form-control" id="modal-vessel" name="vessel" disabled />
                          </div>
                          <div class="col-md-6">
                            <label for="modal-voyageNo" class="form-label">Voyage No:</label>
                            <input type="text" class="form-control" id="modal-voyageNo" name="voyageNo" disabled />
                          </div>
                        </div>
                        <div class="mb-3">
                          <label for="modal-containerSerialNo" class="form-label">Container Serial No:</label>
                          <input type="text" class="form-control" id="modal-containerSerialNo" name="containerSerialNo" disabled />
                        </div>

                        <!-- Section 2: Container Diagrams -->
                        <div class="text-center my-4">
                          <div class="row justify-content-center g-3">
                            <div class="col-12 col-sm-6">
                              <div class="container-side">
                                <img src="images/Rear-Side-Container.png" alt="Rear Side" class="img-fluid" />
                                <div class="form-check mt-2">
                                  <input class="form-check-input" type="checkbox" value="true" id="modal-rearSideCheck" name="rearSideCheck" disabled />
                                  <label class="form-check-label" for="modal-rearSideCheck">Rear Side</label>
                                </div>
                              </div>
                            </div>
                            <div class="col-12 col-sm-6">
                              <div class="container-side">
                                <img src="images/Front-Side-Container.png" alt="Front Side" class="img-fluid" />
                                <div class="form-check mt-2">
                                  <input class="form-check-input" type="checkbox" value="true" id="modal-frontSideCheck" name="frontSideCheck" disabled />
                                  <label class="form-check-label" for="modal-frontSideCheck">Front Side</label>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="row justify-content-center g-3 mt-1">
                              <div class="col-12 col-sm-6">
                                  <div class="container-side">
                                      <img src="images/Top-Side-Container.png" alt="Top Side" class="img-fluid">
                                      <div class="form-check mt-2">
                                          <input class="form-check-input" type="checkbox" value="true" id="modal-topSideCheck" name="topSideCheck" disabled="">
                                          <label class="form-check-label" for="modal-topSideCheck">Top Side</label>
                                      </div>
                                  </div>
                              </div>
                              <div class="col-12 col-sm-6">
                                  <div class="container-side">
                                      <img src="images/Under-Side-Container.png" alt="Under Side" class="img-fluid">
                                      <div class="form-check mt-2">
                                          <input class="form-check-input" type="checkbox" value="true" id="modal-underSideCheck" name="underSideCheck" disabled="">
                                          <label class="form-check-label" for="modal-underSideCheck">Under Side</label>
                                      </div>
                                  </div>
                              </div>
                          </div>
                          <div class="row justify-content-center g-3 mt-1">
                              <div class="col-12 col-sm-6">
                                  <div class="container-side">
                                      <img src="images/Right-Side-Container.png" alt="Right Side" class="img-fluid">
                                      <div class="form-check mt-2">
                                          <input class="form-check-input" type="checkbox" value="true" id="modal-rightSideCheck" name="rightSideCheck" disabled="">
                                          <label class="form-check-label" for="modal-rightSideCheck">Right Side</label>
                                      </div>
                                  </div>
                              </div>
                              <div class="col-12 col-sm-6">
                                  <div class="container-side">
                                      <img src="images/Left-Side-Container.png" alt="Left Side" class="img-fluid">
                                      <div class="form-check mt-2">
                                          <input class="form-check-input" type="checkbox" value="true" id="modal-leftSideCheck" name="leftSideCheck" disabled="">
                                          <label class="form-check-label" for="modal-leftSideCheck">Left Side</label>
                                      </div>
                                  </div>
                              </div>
                          </div>
                          <div class="row justify-content-center g-3 mt-1">
                              <div class="col-12 col-sm-6">
                                  <div class="container-side">
                                      <img src="images/Interior-Side-Container.png" alt="Interior" class="img-fluid">
                                      <div class="form-check mt-2">
                                          <input class="form-check-input" type="checkbox" value="true" id="modal-interiorCheck" name="interiorCheck" disabled="">
                                          <label class="form-check-label" for="modal-interiorCheck">Interior</label>
                                      </div>
                                  </div>
                              </div>
                          </div>
                        </div>

                        <!-- Section 3: Area of Damage -->
                        <h4 class="mt-5">Area of Damage Efficiency</h4>
                        <div class="row">
                          <div class="col-md-3">
                            <h5>Front</h5>
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="true" id="modal-frontPanel" name="frontPanel" disabled />
                              <label class="form-check-label" for="modal-frontPanel">Panel</label>
                            </div>
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="true" id="modal-frontIntExtPosts" name="frontIntExtPosts" disabled />
                              <label class="form-check-label" for="modal-frontIntExtPosts">Int/Ext Posts</label>
                            </div>
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="true" id="modal-frontCornerPosts" name="frontCornerPosts" disabled />
                              <label class="form-check-label" for="modal-frontCornerPosts">Corner Posts</label>
                            </div>
                          </div>
                          <div class="col-md-3">
                            <h5>Sides</h5>
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="true" id="modal-sidesPanel" name="sidesPanel" disabled />
                              <label class="form-check-label" for="modal-sidesPanel">Panel</label>
                            </div>
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="true" id="modal-sidesIntExtPosts" name="sidesIntExtPosts" disabled />
                              <label class="form-check-label" for="modal-sidesIntExtPosts">Int/Ext Posts</label>
                            </div>
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="true" id="modal-sidesTopRail" name="sidesTopRail" disabled />
                              <label class="form-check-label" for="modal-sidesTopRail">Top Rall</label>
                            </div>
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="true" id="modal-sidesBottomRail" name="sidesBottomRail" disabled />
                              <label class="form-check-label" for="modal-sidesBottomRail">Bottom Rall</label>
                            </div>
                          </div>
                          <div class="col-md-3">
                            <h5>Doors/Rear</h5>
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="true" id="modal-doorsPanel" name="doorsPanel" disabled />
                              <label class="form-check-label" for="modal-doorsPanel">Panel</label>
                            </div>
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="true" id="modal-doorsDoorGear" name="doorsDoorGear" disabled />
                              <label class="form-check-label" for="modal-doorsDoorGear">Door Gear</label>
                            </div>
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="true" id="modal-doorsCornerPost" name="doorsCornerPost" disabled />
                              <label class="form-check-label" for="modal-doorsCornerPost">Corner Post</label>
                            </div>
                          </div>
                          <div class="col-md-3">
                            <h5>Roof</h5>
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="true" id="modal-roofPanel" name="roofPanel" disabled />
                              <label class="form-check-label" for="modal-roofPanel">Panel/Tift</label>
                            </div>
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="true" id="modal-roofTiftWire" name="roofTiftWire" disabled />
                              <label class="form-check-label" for="modal-roofTiftWire">Tift Wire</label>
                            </div>
                          </div>
                        </div>
                        <div class="row mt-3">
                          <div class="col-md-3">
                            <h5>Under Sides</h5>
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="true" id="modal-underBearers" name="underBearers" disabled />
                              <label class="form-check-label" for="modal-underBearers">Bearers</label>
                            </div>
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="true" id="modal-underGussets" name="underGussets" disabled />
                              <label class="form-check-label" for="modal-underGussets">Gussets</label>
                            </div>
                          </div>
                          <div class="col-md-3">
                            <h5>Interior</h5>
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="true" id="modal-interiorFlooring" name="interiorFlooring" disabled />
                              <label class="form-check-label" for="modal-interiorFlooring">Flooring</label>
                            </div>
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="true" id="modal-interiorInteriorPanel" name="interiorInteriorPanel" disabled />
                              <label class="form-check-label" for="modal-interiorInteriorPanel">Interior Panel</label>
                            </div>
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="true" id="modal-interiorBattents" name="interiorBattents" disabled />
                              <label class="form-check-label" for="modal-interiorBattents">Battents</label>
                            </div>
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="true" id="modal-interiorRaftBows" name="interiorRaftBows" disabled />
                              <label class="form-check-label" for="modal-interiorRaftBows">Raft Bows</label>
                            </div>
                          </div>
                          <div class="col-md-3">
                            <h5>Others</h5>
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="true" id="modal-othersSeals" name="othersSeals" disabled />
                              <label class="form-check-label" for="modal-othersSeals">Seals:</label>
                            </div>
                          </div>
                        </div>

                        <div class="mt-4">
                          <label for="modal-liableParty" class="form-label">Name and Address of party in whose care when damage accured (Liable Party)</label>
                          <input type="text" class="form-control" id="modal-liableParty" name="liableParty" disabled />
                        </div>

                        <div class="mt-3">
                          <label class="form-label">Container:</label>
                          <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="modal-containerStatus" id="modal-containerLoaded" value="loaded" disabled />
                            <label class="form-check-label" for="modal-containerLoaded">Loaded</label>
                          </div>
                          <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="modal-containerStatus" id="modal-containerEmpty" value="empty" disabled />
                            <label class="form-check-label" for="modal-containerEmpty">Empty</label>
                          </div>
                        </div>

                        <div class="mt-3">
                          <label for="modal-reportingPerson" class="form-label">Signature of Person Reporting:</label>
                          <input type="text" class="form-control" id="modal-reportingPerson" name="reportingPerson" disabled />
                        </div>

                        <!-- Section 4: Photo -->
                        <h4 class="mt-5">Photo of Damage Container</h4>
                        <div id="modal-imagePreview" class="mt-3"></div>

                        <div class="row mt-4">
                          <div class="col-md-6">
                            <label class="form-label">Damage to Contents:</label>
                            <div class="form-check form-check-inline">
                              <input class="form-check-input" type="radio" name="modal-damageContents" id="modal-damageYes" value="yes" disabled />
                              <label class="form-check-label" for="modal-damageYes">Yes</label>
                            </div>
                            <div class="form-check form-check-inline">
                              <input class="form-check-input" type="radio" name="modal-damageContents" id="modal-damageNo" value="no" disabled />
                              <label class="form-check-label" for="modal-damageNo">No</label>
                            </div>
                          </div>
                        </div>
                    </form>
                    <hr>
                    <div class="mt-4">
                        <h5>Signatures</h5>
                        <div class="row">
                            <div class="col-md-4">
                                <h6>Ship's Party</h6>
                                <canvas id="signature-pad-ship" class="signature-pad" width="250" height="150"></canvas>
                                <button id="clear-signature-ship" class="btn btn-sm btn-outline-secondary mt-2">Clear</button>
                            </div>
                            <div class="col-md-4">
                                <h6>Agent's Party</h6>
                                <canvas id="signature-pad-agent" class="signature-pad" width="250" height="150"></canvas>
                                <button id="clear-signature-agent" class="btn btn-sm btn-outline-secondary mt-2">Clear</button>
                            </div>
                            <div class="col-md-4">
                                <h6>Operational</h6>
                                <canvas id="signature-pad-operational" class="signature-pad" width="250" height="150"></canvas>
                                <button id="clear-signature-operational" class="btn btn-sm btn-outline-secondary mt-2">Clear</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="save-signatures-btn">Save Signatures</button>
                    <button type="button" class="btn btn-success" id="convert-to-pdf-btn" style="display: none;">Convert to PDF</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden PDF Template -->
    <div id="pdf-template-container" style="position: absolute; left: -9999px; width: 800px; padding: 20px; background-color: white; font-family: Arial, sans-serif; font-size: 10px;">
        <div style="display: flex; justify-content: space-between; align-items: flex-start; border-bottom: 2px solid black; padding-bottom: 10px;">
            <img src="images/koja.jpg" alt="TPK KOJA" style="width: 150px;">
            <div style="text-align: right;">
                <div style="display: flex; border: 1px solid black;">
                    <div style="padding: 5px; border-right: 1px solid black;">EIR No:</div>
                    <div id="pdf-eirNo" style="padding: 5px; width: 100px;"></div>
                </div>
                <div style="display: flex; border: 1px solid black; border-top: none;">
                    <div style="padding: 5px; border-right: 1px solid black;">Date of Damage:</div>
                    <div id="pdf-damageDate" style="padding: 5px; width: 100px;"></div>
                </div>
                <div style="display: flex; border: 1px solid black; border-top: none;">
                    <div style="padding: 5px; border-right: 1px solid black;">Vessel:</div>
                    <div id="pdf-vessel" style="padding: 5px; width: 100px;"></div>
                </div>
                <div style="display: flex; border: 1px solid black; border-top: none;">
                    <div style="padding: 5px; border-right: 1px solid black;">Voyage No:</div>
                    <div id="pdf-voyageNo" style="padding: 5px; width: 100px;"></div>
                </div>
            </div>
        </div>
        <h2 style="text-align: center; font-size: 18px; font-weight: bold; margin: 10px 0;">Container Damage Report</h2>
        <div style="display: flex; justify-content: space-between;">
            <div style="width: 48%; border: 1px solid black; padding: 10px;">
                <h3 style="text-align: center; font-weight: bold; font-size: 12px; margin-bottom: 10px;">MARK DAMAGE ON PLAN</h3>
                <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 5px;">
                    <img src="images/Rear-Side-Container.png" style="width: 80px; height: auto; border: 1px solid #ccc;">
                    <img src="images/Front-Side-Container.png" style="width: 80px; height: auto; border: 1px solid #ccc;">
                    <img src="images/Top-Side-Container.png" style="width: 80px; height: auto; border: 1px solid #ccc;">
                    <img src="images/Under-Side-Container.png" style="width: 80px; height: auto; border: 1px solid #ccc;">
                    <img src="images/Right-Side-Container.png" style="width: 80px; height: auto; border: 1px solid #ccc;">
                    <img src="images/Left-Side-Container.png" style="width: 80px; height: auto; border: 1px solid #ccc;">
                    <img src="images/Interior-Side-Container.png" style="width: 80px; height: auto; border: 1px solid #ccc;">
                </div>
                <div style="border: 1px solid black; padding: 5px; margin-top: 20px;">
                    Container: <span id="pdf-containerStatus"></span>
                </div>
                <div style="border: 1px solid black; padding: 5px; border-top: none;">
                    Damage To: Contents: <span id="pdf-damageContents"></span>
                </div>
                <div style="border: 1px solid black; padding: 5px; border-top: none;">
                    Signature of Person Reporting: <span id="pdf-reportingPerson"></span>
                </div>
            </div>
            <div style="width: 48%; border: 1px solid black; padding: 10px;">
                <h3 style="text-align: center; font-weight: bold; font-size: 12px; margin-bottom: 10px;">Area of Damage Efficiency / Checklist in Appropriate Box</h3>
                <div style="display: flex; justify-content: space-between;">
                    <div style="width: 48%;">
                        <h4 style="font-weight: bold; font-size: 11px;">FRONT</h4>
                        <div id="pdf-frontPanel">1. Panel</div>
                        <div id="pdf-frontIntExtPosts">2. Int/Ext Posts</div>
                        <div id="pdf-frontCornerPosts">3. Corner Posts</div>
                        <h4 style="font-weight: bold; font-size: 11px; margin-top: 10px;">SIDES</h4>
                        <div id="pdf-sidesPanel">4. Panel</div>
                        <div id="pdf-sidesIntExtPosts">5. Int/Ext Posts</div>
                        <div id="pdf-sidesTopRail">6. Top Rail</div>
                        <div id="pdf-sidesBottomRail">7. Bottom Rail</div>
                        <h4 style="font-weight: bold; font-size: 11px; margin-top: 10px;">DOORS/REAR</h4>
                        <div id="pdf-doorsPanel">8. Panel</div>
                        <div id="pdf-doorsDoorGear">9. Door Gear</div>
                        <div id="pdf-doorsCornerPost">10. Corner Post</div>
                    </div>
                    <div style="width: 48%;">
                        <h4 style="font-weight: bold; font-size: 11px;">ROOF</h4>
                        <div id="pdf-roofPanel">11. Panel/Tift</div>
                        <div id="pdf-roofTiftWire">12. Tift Wire</div>
                        <h4 style="font-weight: bold; font-size: 11px; margin-top: 10px;">UNDER SIDES</h4>
                        <div id="pdf-underBearers">13. Bearers</div>
                        <div id="pdf-underGussets">14. Gussets</div>
                        <h4 style="font-weight: bold; font-size: 11px; margin-top: 10px;">INTERIOR</h4>
                        <div id="pdf-interiorFlooring">15. Flooring</div>
                        <div id="pdf-interiorInteriorPanel">16. Interior Panel/Battents</div>
                        <div id="pdf-interiorRaftBows">17. Roft Bows</div>
                        <h4 style="font-weight: bold; font-size: 11px; margin-top: 10px;">OTHER</h4>
                        <div id="pdf-othersSeals">18. Seals</div>
                    </div>
                </div>
            </div>
        </div>
        <div style="margin-top: 10px;">
            <p>Describe the extent of the damage or deficience and detail how the damage occured. (Include vechile Reg. Nos. driver's names damages to other property, e.t.c)</p>
            <div style="border: 1px solid black; height: 50px;"></div>
        </div>
        <div style="margin-top: 10px;">
            <p>Name and Address of party in whose care when damage accured (Liable Party)</p>
            <div id="pdf-liableParty" style="border: 1px solid black; height: 30px;"></div>
        </div>
        <div style="margin-top: 10px;">
            <p>Date letter of recourse sent to liable party (attach copy to insurance & claims deopt)</p>
            <div style="border: 1px solid black; height: 30px;"></div>
        </div>
        <div style="display: flex; justify-content: space-between; margin-top: 20px;">
            <div style="width: 48%;">
                <p>Photo of the Damaged Container</p>
                <div id="pdf-damagePhoto" style="border: 1px solid black; height: 150px; display: flex; justify-content: center; align-items: center;">Bagian Foto</div>
            </div>
            <div style="width: 48%; display: flex; justify-content: space-between;">
                <div style="width: 48%; text-align: center;">
                    <p>Pihak Kapal/Agent</p>
                    <div id="pdf-signatureShip" style="border-bottom: 1px dotted black; height: 80px; margin-top: 50px;"></div>
                </div>
                <div style="width: 48%; text-align: center;">
                    <p>Pihak Kapal/Agent</p>
                    <div id="pdf-signatureAgent" style="border-bottom: 1px dotted black; height: 80px; margin-top: 50px;"></div>
                </div>
            </div>
        </div>
         <div style="text-align: center; margin-top: 20px;">
            <p>Operational</p>
            <div id="pdf-signatureOperational" style="border-bottom: 1px dotted black; height: 80px; margin-top: 50px; width: 200px; margin-left: auto; margin-right: auto;"></div>
        </div>
    </div>
</body>
</html>
